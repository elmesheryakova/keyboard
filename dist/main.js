(()=>{"use strict";const e=[{key:"`",code:"Backquote",valueShift:"~"},{key:"1",code:"Digit1",valueShift:"!"},{key:"2",code:"Digit2",valueShift:"@"},{key:"3",code:"Digit3",valueShift:"#"},{key:"4",code:"Digit4",valueShift:"$"},{key:"5",code:"Digit5",valueShift:"%"},{key:"6",code:"Digit6",valueShift:"^"},{key:"7",code:"Digit7",valueShift:"&"},{key:"8",code:"Digit8",valueShift:"*"},{key:"9",code:"Digit9",valueShift:"("},{key:"0",code:"Digit0",valueShift:")"},{key:"-",code:"Minus",valueShift:"_"},{key:"=",code:"Equal",valueShift:"+"},{key:"Backspace",code:"Backspace",valueShift:""},{key:"Tab",code:"Tab",valueShift:""},{key:"q",code:"KeyQ",valueShift:"",caps:"ok"},{key:"w",code:"KeyW",valueShift:"",caps:"ok"},{key:"e",code:"KeyE",valueShift:"",caps:"ok"},{key:"r",code:"KeyR",valueShift:"",caps:"ok"},{key:"t",code:"KeyT",valueShift:"",caps:"ok"},{key:"y",code:"KeyY",valueShift:"",caps:"ok"},{key:"u",code:"KeyU",valueShift:"",caps:"ok"},{key:"i",code:"KeyI",valueShift:"",caps:"ok"},{key:"o",code:"KeyO",valueShift:"",caps:"ok"},{key:"p",code:"KeyP",valueShift:"",caps:"ok"},{key:"[",code:"BracketLeft",valueShift:"{"},{key:"]",code:"BracketRight",valueShift:"}"},{key:"\\",code:"Backslash",valueShift:"|"},{key:"Delete",code:"Delete",valueShift:""},{key:"CapsLock",code:"CapsLock",valueShift:""},{key:"a",code:"KeyA",valueShift:"",caps:"ok"},{key:"s",code:"KeyS",valueShift:"",caps:"ok"},{key:"d",code:"KeyD",valueShift:"",caps:"ok"},{key:"f",code:"KeyF",valueShift:"",caps:"ok"},{key:"g",code:"KeyG",valueShift:"",caps:"ok"},{key:"h",code:"KeyH",valueShift:"",caps:"ok"},{key:"j",code:"KeyJ",valueShift:"",caps:"ok"},{key:"k",code:"KeyK",valueShift:"",caps:"ok"},{key:"l",code:"KeyL",valueShift:"",caps:"ok"},{key:";",code:"Semicolon",valueShift:":"},{key:"'",code:"Quote",valueShift:'"'},{key:"Enter",code:"Enter",valueShift:""},{key:"Shift",code:"ShiftLeft",valueShift:""},{key:"z",code:"KeyZ",valueShift:"",caps:"ok"},{key:"x",code:"KeyX",valueShift:"",caps:"ok"},{key:"c",code:"KeyC",valueShift:"",caps:"ok"},{key:"v",code:"KeyV",valueShift:"",caps:"ok"},{key:"b",code:"KeyB",valueShift:"",caps:"ok"},{key:"n",code:"KeyN",valueShift:"",caps:"ok"},{key:"m",code:"KeyM",valueShift:"",caps:"ok"},{key:",",code:"Comma",valueShift:"<"},{key:".",code:"Period",valueShift:">"},{key:"/",code:"Slash",valueShift:"?"},{key:"↑",code:"ArrowUp",valueShift:""},{key:"Shift",code:"ShiftRight",valueShift:""},{key:"Ctrl",code:"ControlLeft",valueShift:""},{key:"WIN",code:"MetaLeft",valueShift:""},{key:"Alt",code:"AltLeft",valueShift:""},{key:" ",code:"Space",valueShift:""},{key:"Alt",code:"AltRight",valueShift:""},{key:"←",code:"ArrowLeft",valueShift:""},{key:"↓",code:"ArrowDown",valueShift:""},{key:"→",code:"ArrowRight",valueShift:""},{key:"Ctrl",code:"ControlRight",valueShift:""}],t=[{key:"ё",code:"Backquote",valueShift:"~",caps:"ok"},{key:"1",code:"Digit1",valueShift:"!"},{key:"2",code:"Digit2",valueShift:"@"},{key:"3",code:"Digit3",valueShift:"#"},{key:"4",code:"Digit4",valueShift:"$"},{key:"5",code:"Digit5",valueShift:"%"},{key:"6",code:"Digit6",valueShift:"^"},{key:"7",code:"Digit7",valueShift:"&"},{key:"8",code:"Digit8",valueShift:"*"},{key:"9",code:"Digit9",valueShift:"("},{key:"0",code:"Digit0",valueShift:")"},{key:"-",code:"Minus",valueShift:"_"},{key:"=",code:"Equal",valueShift:"+"},{key:"Backspace",code:"Backspace",valueShift:""},{key:"Tab",code:"Tab",valueShift:""},{key:"й",code:"KeyQ",valueShift:"",caps:"ok"},{key:"ц",code:"KeyW",valueShift:"",caps:"ok"},{key:"у",code:"KeyE",valueShift:"",caps:"ok"},{key:"к",code:"KeyR",valueShift:"",caps:"ok"},{key:"е",code:"KeyT",valueShift:"",caps:"ok"},{key:"н",code:"KeyY",valueShift:"",caps:"ok"},{key:"г",code:"KeyU",valueShift:"",caps:"ok"},{key:"ш",code:"KeyI",valueShift:"",caps:"ok"},{key:"щ",code:"KeyO",valueShift:"",caps:"ok"},{key:"з",code:"KeyP",valueShift:"",caps:"ok"},{key:"х",code:"BracketLeft",valueShift:"",caps:"ok"},{key:"ъ",code:"BracketRight",valueShift:"",caps:"ok"},{key:"\\",code:"Backslash",valueShift:"/"},{key:"Delete",code:"Delete",valueShift:""},{key:"CapsLock",code:"CapsLock",valueShift:""},{key:"ф",code:"KeyA",valueShift:"Ф",caps:"ok"},{key:"ы",code:"KeyS",valueShift:"Ы",caps:"ok"},{key:"в",code:"KeyD",valueShift:"В",caps:"ok"},{key:"а",code:"KeyF",valueShift:"А",caps:"ok"},{key:"п",code:"KeyG",valueShift:"П",caps:"ok"},{key:"р",code:"KeyH",valueShift:"Р",caps:"ok"},{key:"о",code:"KeyJ",valueShift:"О",caps:"ok"},{key:"л",code:"KeyK",valueShift:"Л",caps:"ok"},{key:"д",code:"KeyL",valueShift:"Д",caps:"ok"},{key:"ж",code:"Semicolon",valueShift:"Ж",caps:"ok"},{key:"э",code:"Quote",valueShift:"Э",caps:"ok"},{key:"Enter",code:"Enter",valueShift:""},{key:"Shift",code:"ShiftLeft",valueShift:""},{key:"я",code:"KeyZ",valueShift:"Я",caps:"ok"},{key:"ч",code:"KeyX",valueShift:"Ч",caps:"ok"},{key:"с",code:"KeyC",valueShift:"С",caps:"ok"},{key:"м",code:"KeyV",valueShift:"М",caps:"ok"},{key:"и",code:"KeyB",valueShift:"И",caps:"ok"},{key:"т",code:"KeyN",valueShift:"Т",caps:"ok"},{key:"ь",code:"KeyM",valueShift:"Ь",caps:"ok"},{key:"б",code:"Comma",valueShift:"Б",caps:"ok"},{key:"ю",code:"Period",valueShift:"Ю",caps:"ok"},{key:".",code:"Slash",valueShift:","},{key:"↑",code:"ArrowUp",valueShift:""},{key:"Shift",code:"ShiftRight",valueShift:""},{key:"Ctrl",code:"ControlLeft",valueShift:""},{key:"WIN",code:"MetaLeft",valueShift:""},{key:"Alt",code:"AltLeft",valueShift:""},{key:" ",code:"Space",valueShift:""},{key:"Alt",code:"AltRight",valueShift:""},{key:"←",code:"ArrowLeft",valueShift:""},{key:"↓",code:"ArrowDown",valueShift:""},{key:"→",code:"ArrowRight",valueShift:""},{key:"Ctrl",code:"ControlRight",valueShift:""}];function a(e,t){for(var a=0;a<t.length;a++){var c=t[a];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(e,c.key,c)}}var c=function(){function e(t){var a=t.key,c=t.code,o=t.caps;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.key=a,this.code=c,this.caps=o}var t,c;return t=e,(c=[{key:"createdKeys",value:function(){var e=document.createElement("div");return e.classList.add("key"),e.setAttribute("data-key",this.code),this.caps&&e.setAttribute("data-caps",this.caps),e.innerHTML="\n    ".concat(this.key,"\n    "),e}}])&&a(t.prototype,c),Object.defineProperty(t,"prototype",{writable:!1}),e}(),o=document.createElement("div");o.classList.add("wrapper"),document.body.append(o);var i=function(e){for(var t=document.querySelectorAll("[data-caps = ok"),a=0;a<t.length;a+=1)t[a].textContent="ok"===e?t[a].textContent.trim().toUpperCase():t[a].textContent.trim().toLowerCase()};document.addEventListener("DOMContentLoaded",(function(){var a,l,n;e&&((n=document.createElement("div")).classList.add("keyboard"),(l=[],"ru"===localStorage.getItem("lang")?t.forEach((function(e){l.push(new c(e))})):e.forEach((function(e){l.push(new c(e))})),l).forEach((function(e){n.append(e.createdKeys())})),o.append(n)),function(){var e=document.createElement("div");e.classList.add("textOS"),e.textContent="Клавиатура создана в операционной системе Windows",document.body.append(e);var t=document.createElement("div");t.classList.add("textLang"),t.innerHTML="Переключения языка происходит клавишами <span> ShiftLeft + AltLeft </span>",document.body.append(t)}(),(a=document.createElement("textarea"),a.classList.add("textarea"),a.focus(),document.body.prepend(a),a).focus();var u=document.querySelector(".textarea"),s=document.querySelectorAll(".key");u&&(u.value=localStorage.getItem("text")||"",u.addEventListener("input",(function(){localStorage.setItem("text",u.value)}))),s.forEach((function(e){e.addEventListener("click",(function(e){if(null!==e&&e.target instanceof HTMLElement){var t=e.target.textContent.trim();s.forEach((function(e){e.classList.remove("active")})),document.querySelector("[data-key = ".concat(e.target.dataset.key,"]")).classList.add("active"),"Backspace"===t&&(t=""),"Tab"===t&&(t=""),"Delete"===t&&(t=""),"CapsLock"===t&&(t=""),"Enter"===t&&(t=""),"Shift"===t&&(t=""),"Ctrl"===t&&(t=""),"WIN"===t&&(t=""),"Alt"===t&&(t=""),"↑"===t&&(t=""),"←"===t&&(t=""),"↓"===t&&(t=""),"→"===t&&(t=""),u.value+=t}}))}));var d=!1;document.addEventListener("keydown",(function(e){s&&s.forEach((function(e){e.classList.remove("active")})),document.querySelector("[data-key = ".concat(e.code,"]"))&&document.querySelector("[data-key = ".concat(e.code,"]")).classList.add("active"),"ShiftLeft"===e.code&&(d=!0),"AltLeft"===e.code&&d&&(d=!1,"ru"===localStorage.getItem("lang")?(localStorage.setItem("lang","en"),window.location.reload()):"en"===localStorage.getItem("lang")&&(localStorage.setItem("lang","ru"),window.location.reload()))})),document.addEventListener("mousedown",(function(e){if(e.preventDefault(),localStorage.setItem("text",u.value),null!==e&&e.target instanceof HTMLElement){if("Space"===e.target.dataset.key){var t=u.selectionStart,a=u.selectionEnd;t===a?(u.value="".concat(u.value.slice(0,t)," ").concat(u.value.slice(t)),u.focus(),u.selectionStart=t+1,u.selectionEnd=t+1):(u.value="".concat(u.value.slice(0,t)," ").concat(u.value.slice(a)),u.focus(),u.selectionStart=t+1,u.selectionEnd=t+1)}if("Tab"===e.target.dataset.key){var c=u.selectionStart,o=u.selectionEnd;c===o?(u.value="".concat(u.value.slice(0,c),"\t").concat(u.value.slice(c)),u.focus(),u.selectionStart=c+1,u.selectionEnd=c+1):(u.value="".concat(u.value.slice(0,c),"\t").concat(u.value.slice(o)),u.focus(),u.selectionStart=c+1,u.selectionEnd=c+1)}if("Backspace"===e.target.dataset.key){var l=u.selectionStart;0!==l&&(u.value="".concat(u.value.slice(0,u.selectionStart-1)," ").concat(u.value.slice(u.selectionStart,u.value.length)),u.setSelectionRange(l-1,l-1))}if("Delete"===e.target.dataset.key){var n=u.selectionStart,s=u.selectionEnd,d=n===s?u.value.substring(0,n)+u.value.substring(s+1):u.value.substring(0,n)+u.value.substring(s);u.value=d,u.focus(),u.selectionEnd=n,u.selectionStart=n}if("Enter"===e.target.dataset.key){var k=u.selectionStart,f=u.selectionEnd,y="".concat(u.value.substring(0,k),"\n").concat(u.value.substring(f));u.value=y,u.focus();var v=u.selectionEnd;u.selectionEnd=v-u.value.substring(f).length+1,u.selectionStart=v-u.value.substring(f).length+1}if("ArrowLeft"===e.target.dataset.key){var r=u.selectionStart;0!==r&&(u.selectionEnd=r-1,u.selectionStart=r-1)}if("ArrowRight"===e.target.dataset.key){var S=u.selectionStart;u.selectionEnd=S+1,u.selectionStart=S+1}if("ArrowUp"===e.target.dataset.key){var h,p=u.selectionStart;if(-1!==(h="\n"===u.value[p]?u.value.lastIndexOf("\n",p-1):u.value.lastIndexOf("\n",p))){var g,m=p-h,K=u.value.lastIndexOf("\n",h-1);m>=(g=-1!==K?h-K:p-m+1)?(u.selectionEnd=h,u.selectionStart=h):(u.selectionEnd=p-g,u.selectionStart=p-g)}}if("ArrowDown"===e.target.dataset.key){var E,L,D=u.selectionEnd;L=-1!==(E="\n"===u.value[D]?u.value.lastIndexOf("\n",D-1):u.value.lastIndexOf("\n",D))?D-E:D+1;var w=u.value.indexOf("\n",D);if(-1!==w){var b=u.value.indexOf("\n",w+1);-1===b&&(b=u.value.length),L>=b-w?(u.selectionEnd=b,u.selectionStart=b):(u.selectionEnd=w+L,u.selectionStart=w+L)}}"CapsLock"===e.target.dataset.key&&("ok"===localStorage.getItem("caps")?(localStorage.removeItem("caps"),i(localStorage.getItem("caps"))):(localStorage.setItem("caps","ok"),i(localStorage.getItem("caps"))))}})),setInterval((function(){s.forEach((function(e){e.classList.remove("active")}))}),300)}))})();